---
title: "Process x"
author:
- Oliver Snellman^[University of Helsinki, visiting University of Pennsylvania, oliver.snellman@gmail.com, www.oliversnellman.com]
date: "Nov 2023"
geometry: "left=3cm,right=3cm,top=2cm,bottom=2cm"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



With t-distribution, when shrinking the degrees of freedom towards 1, first the finite variance seizes to exist at df $\leq 2$ and then finite mean vanishes when df $\leq 1$. The latter case corresponds to the Cauchy distribution, in which case the sample average over n observations doesn't converge to the real mean when $n \rightarrow \infty$, because there is no real mean. The issue stems from the scaling of the tails of the distribution, allowing ever more extreme realizations.

But what would a process look like, if it didn't have a converging mean, but it did have a finite variance? In other words, the reason for the non-converging mean was not the exploding variance.


#### A process with finite variance but non-converging mean

1. Initialize as x=0, y=0 and i=1
2. If x==1, set x=0, x=1 otherwise
3. Assign $2^i$ times the value x to y
4. Set i = i + 1
5. Repeat steps 2-4 indefinitely

\vspace{-1cm}

```{r, echo=FALSE}
x=0
y=0
for(i in 1:15) {
  x <- ifelse(x==1, 0, 1)
  y_ <- rep(x, 2^i)
  y <- c(y, y_)
}

y_mean <- c(0)
y_var <- c(0)
for(i in 2:length(y)) {
  y_mean_ <- mean(y[1:i])
  y_mean <- c(y_mean, y_mean_)
  
  y_var_ <- sd(y[1:i])^2
  y_var <- c(y_var, y_var_)
}

ts.plot(y, col="forestgreen", xlab="", ylab="")
lines(y_mean, col="blue")
lines(y_var, col="red")

legend("bottomright", legend=c("y", "mean(y)", "var(y)"), col=c("forestgreen", "blue", "red"), lwd=1.3, cex=0.8, bty="n")
```



\newpage

#### Same with a continuous function\\

$$ y = \sin(\log(x^k))$$

where $k=5$ only compresses the waves for visualization. The grey lines illustrate the infimum and supremum for the mean of y, which remain constant for all cutoffs of x.

\vspace{-1cm}

```{r, echo=FALSE}
y <- 0
y_mean <- c(0)
y_var <- c(0)
k=5
for(i in 2:35000) {
  y <- c(y, sin(log(i^k)))
  y_mean <- c(y_mean, mean(y[1:i]))
  y_var <- c(y_var, sd(y[1:i])^2)
}

min_mean <- rep(min(y_mean[-c(1:100)]), length(y_mean))
max_mean <- rep(max(y_mean), length(y_mean))

min_mean_ <- rep(min(y_var[-c(1:100)]), length(y_var))
max_mean_ <- rep(max(y_var), length(y_var))

ts.plot(y, col="forestgreen", xlab="", ylab="")
lines(max_mean, col="grey", lty=2, lwd=1)
lines(min_mean, col="grey", lty=2, lwd=1)
lines(max_mean_, col="grey", lty=2, lwd=1)
lines(min_mean_, col="grey", lty=2, lwd=1)
lines(y_mean, col="blue")
lines(y_var, col="red")


legend("bottomright", legend=c("y", "mean(y)", "var(y)", "range(mean(y))"), col=c("forestgreen", "blue", "red", "grey"), lty=c(1,1,1,2), lwd=1.3, cex=0.8, bty="n")
```


It should be noted that also the variance diverges in these examples.
